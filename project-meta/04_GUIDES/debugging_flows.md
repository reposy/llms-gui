# 가이드: 노드 플로우 디버깅

이 가이드는 노드 기반 워크플로우 내의 문제를 디버깅하기 위한 전략과 기술을 제공합니다. 효과적인 디버깅은 강력하고 안정적인 자동화를 구축하는 데 핵심입니다.

## 1. 디버깅에 대한 일반적인 접근 방식

플로우가 예상대로 작동하지 않을 경우 체계적으로 디버깅에 접근하십시오:

1.  **예상 동작 이해:** 각 단계에서 플로우가 *수행해야 하는* 작업과 최종 출력이 무엇인지 명확하게 정의합니다.
2.  **문제 분리:** 어떤 노드 또는 연결이 문제를 일으키는지 정확히 찾아내십시오. 플로우의 시작 부분이나 마지막으로 정상 작동했던 상태부터 시작합니다.
3.  **데이터 검사:** 노드 간에 전달되는 데이터를 확인합니다. 데이터 타입 불일치, 예기치 않은 값 또는 누락된 데이터는 일반적인 원인입니다.
4.  **노드 구성 확인:** 각 노드가 올바르게 구성되었는지 확인합니다. 작은 오타나 잘못된 설정으로 인해 플로우가 중단될 수 있습니다.
5.  **로그 참조:** 프론트엔드 문제는 브라우저 콘솔 로그를 확인하고, 플로우에 백엔드 노드가 포함된 경우 백엔드 서버 로그를 확인합니다.

## 2. 검사를 위한 `Output Node` 사용

`Output Node`(출력 노드)는 플로우의 어느 지점에서나 데이터를 검사하기 위한 기본 도구입니다.

*   **배치:** 플로우의 여러 지점, 특히 데이터 변환이 발생하거나 문제가 의심되는 노드 뒤에 `Output Node`를 추가합니다.
*   **데이터 보기:** 플로우가 실행되면 `Output Node`는 수신한 데이터를 표시합니다. 이를 통해 해당 단계에서 데이터 패킷의 정확한 구조와 내용을 볼 수 있습니다.
*   **다중 출력:** 여러 `Output Node`를 사용하여 복잡한 체인을 통해 데이터 변화를 추적할 수 있습니다.

## 3. 브라우저 개발자 콘솔 확인 (프론트엔드 노드)

프론트엔드에서 완전히 실행되는 노드(예: `JSON Extractor Node`, `LLM Node` 클라이언트 측 작업, `API Node` 클라이언트 측 호출)와 관련된 문제의 경우:

1.  **개발자 도구 열기:** 웹 브라우저에서 개발자 도구를 엽니다 (일반적으로 F12 키를 누르거나 마우스 오른쪽 버튼을 클릭하고 "검사" 선택).
2.  **콘솔 탭:** "콘솔" 탭으로 이동합니다.
3.  **오류 찾기:** JavaScript 오류, 실패한 네트워크 요청(클라이언트 측 API 호출의 경우) 또는 노드 코드의 `console.log`/`console.warn` 메시지가 여기에 나타납니다.
4.  **네트워크 탭:** 클라이언트 측 HTTP 요청을 하는 노드(예: `API Node`의 일부 구성)의 경우 "네트워크" 탭에서 요청 세부 정보, 헤더 및 서버 응답을 볼 수 있습니다. 이는 CORS 문제나 잘못된 API 사용을 진단하는 데 유용합니다.

## 4. 백엔드 로그 확인 (백엔드 연동 노드)

백엔드와 상호 작용하는 노드(예: `/api/web-crawler/fetch`를 호출하는 `Web Crawler Node`)의 경우:

1.  **백엔드 로그 액세스:** FastAPI 백엔드 애플리케이션에서 생성된 로그에 액세스해야 합니다.
    *   개발 중 로컬에서 실행하는 경우 이러한 로그는 일반적으로 백엔드 서버를 시작한 터미널에 출력됩니다.
    *   배포된 환경에서는 로그가 로깅 서비스(예: Docker 로그, 클라우드 공급자 로깅)로 전송될 수 있습니다.
2.  **관련 로그 식별:** 노드가 보낸 API 요청에 해당하는 로그 항목을 찾습니다. FastAPI 로그에는 일반적으로 요청 경로, 상태 코드 및 발생한 모든 예외가 포함됩니다.
3.  **오류 메시지:** 백엔드 오류 메시지는 무엇이 잘못되었는지에 대한 자세한 정보를 제공할 수 있습니다 (예: 데이터베이스 오류, 파일 시스템 문제, 서비스 로직의 예외).

## 5. 일반적인 오류 패턴 이해

다음과 같은 일반적인 문제에 유의하십시오:

*   **데이터 타입 불일치:** 노드가 문자열을 예상하지만 숫자나 객체를 수신합니다. `Output Node`를 사용하여 타입을 확인하십시오.
*   **잘못된 노드 설정:** 잘못된 API 키, `JSON Extractor`의 잘못된 경로 또는 `Web Crawler`의 잘못된 URL.
*   **API 실패 (백엔드 노드):**
    *   **네트워크 문제:** 백엔드가 외부 서비스에 연결할 수 없습니다.
    *   **인증/권한 부여 오류:** 백엔드가 호출하는 외부 서비스에 대한 잘못된 API 키 또는 자격 증명.
    *   **속도 제한:** 외부 API의 사용 한도 초과.
    *   **잘못된 API 경로:** 프론트엔드 노드가 존재하지 않거나 철자가 틀린 백엔드 API 엔드포인트를 호출하고 있습니다.
*   **CORS 문제 (프론트엔드 `API Node`):** 프론트엔드 `API Node`가 외부 API를 직접 호출하려고 하면 대상 서버의 CORS(Cross-Origin Resource Sharing) 정책에 의해 요청이 차단될 수 있습니다. 브라우저 콘솔에서 CORS 오류를 확인하십시오. 외부 API가 현재 도메인에서의 직접적인 클라이언트 측 액세스를 지원하지 않는 경우 백엔드를 사용하여 이러한 호출을 프록시하는 것이 해결책이 될 수 있습니다.
*   **Null 또는 정의되지 않은 데이터:** 노드가 올바르게 전달되지 않았거나 예기치 않게 null/undefined인 데이터에 대해 작업을 시도합니다. 데이터가 손실된 위치를 추적하기 위해 노드 로직에 검사를 추가하거나 `Output Node`를 사용하십시오.
*   **반복/순회 문제 (`Group Node`, `Input Node` "ForEach" 모드):**
    *   반복되는 데이터가 올바른 형식(예: 배열)인지 확인하십시오.
    *   `Group Node`의 내부 노드가 각 항목을 올바르게 처리하고 있는지 확인하십시오.

## 6. 문제 노드 분리 전략

복잡한 플로우가 실패하면 오류의 원인을 좁히십시오:

*   **이진 검색 접근 방식:** 긴 노드 체인이 있는 경우 중간에서 체인을 분리하고 `Output Node`를 사용하여 전반부가 작동하는지 확인합니다. 작동한다면 문제는 후반부에 있습니다. 다시 연결하고 문제가 있는 섹션에서 이 프로세스를 반복합니다.
*   **플로우 단순화:** 플로우가 작동하기 시작하는지 확인하기 위해 노드를 일시적으로 제거하거나 우회합니다. 예를 들어, 복잡한 데이터 변환 노드를 다운스트림 노드를 테스트하기 위해 알려진 양호한 데이터를 제공하는 간단한 `Input Node`로 교체합니다.
*   **개별 노드 테스트:** 의심스러운 노드, 데이터를 공급할 `Input Node`, 결과를 볼 `Output Node`만으로 새롭고 간단한 플로우를 만듭니다. 이는 노드 자체가 결함이 있는지 또는 문제가 더 큰 플로우에서의 상호 작용과 관련이 있는지 확인하는 데 도움이 됩니다.
*   **연결 확인:** 모든 노드가 올바르게 연결되어 있고 한 노드의 출력이 다음 노드의 입력과 호환되는지 확인합니다.

이러한 디버깅 기술을 체계적으로 적용하면 노드 플로우의 문제를 효율적으로 식별하고 해결할 수 있습니다. 