# UI Guideline for Flow Editor

이 문서는 본 프로젝트의 노드 기반 Flow Editor UI/UX 규칙을 명확히 정의합니다. 실제 구현 및 논의된 내용을 바탕으로 작성되었습니다.

---

## 1. 노드 공통 UI/UX 규칙

- **노드는 항상 주요 정보를 표시**
  - 라벨, 아이콘, 요약 등 핵심 정보는 포커싱 여부와 무관하게 항상 노드 내에 표시
- **포커싱(선택) 시**
  - 노드 테두리에 강조(파란색 등) 효과 적용
  - 상세 설정 UI(폼 등)가 추가로 노출될 수 있음
- **포커싱 해제 시**
  - 테두리 강조가 사라지고, 평범한 테두리만 남음
  - 내용(라벨, 요약 등)은 그대로 유지
- **노드 하단에는 결과(Result) 영역이 항상 표시**
  - 결과가 없으면 placeholder(예: "No result yet.") 표시
  - 결과가 있으면 실제 결과 내용 표시

---

## 2. LLM Node UI/UX

- **항상 전체 UI(라벨, 모델, 프롬프트, 온도, Provider, 모드 등) 노출**
- **포커싱 시**
  - 테두리에 파란색 강조 효과
  - 상세 설정 UI(폼) 그대로 유지
- **포커싱 해제 시**
  - 테두리 강조만 사라지고, 모든 내용은 그대로 노출
- **Result(결과) 영역**
  - 노드 하단에 항상 표시
  - 결과가 없으면 "No result yet." 표시
  - 결과가 있으면 실제 결과 텍스트(또는 마크다운, JSON 등) 표시

---

## 3. Input Node UI/UX

- **항상 전체 UI(라벨, 입력 모드 토글, 텍스트/파일 입력, 아이템 리스트 등) 노출**
- **Batch/ForEach 모드 전환**
  - `iterateEachRow` 상태로만 관리 (executionMode 등 불필요)
  - UI에서 명확히 구분(버튼, 토글 등)
  - **모드 전환 토글 버튼은 아이템 개수와 상관없이 항상 표시됩니다.**
- **포커싱 시**
  - 테두리 강조(파란색 등)
- **포커싱 해제 시**
  - 테두리 강조 해제, 내용은 그대로
- **입력 아이템 리스트, 요약, 파일 업로드 등은 항상 표시**

---

## 4. Group Node UI/UX

- **그룹 노드는 내부에 다른 노드를 포함할 수 있는 컨테이너 역할을 함**
- **시각적 표현**
  - 넓은 영역을 가진 사각형으로 표시 (기본 크기: 1200 x 700)
  - 배경색은 반투명하게 적용하여 그룹과 내부 노드를 구분
  - 테두리 색상으로 선택 상태 표시 (선택 시 진한 색, 미선택 시 연한 색)
- **노드 배치 및 이동**
  - 그룹 노드 영역 안으로 다른 노드를 드래그하면 자동으로 부모-자식 관계 설정
  - **중요**: 그룹 내 자식 노드는 원래 위치(절대 좌표)를 유지함
  - 그룹 노드를 이동하면 내부의 모든 자식 노드도 함께 이동함
  - 자식 노드를 그룹 밖으로 드래그하면 부모-자식 관계가 해제됨
- **상호작용**
  - 그룹 헤더에는 실행 버튼이 있어 그룹 내 모든 노드를 일괄 실행 가능
  - 그룹 내 노드 목록이 우측 상단에 표시됨
  - 그룹 자체 선택 시 그룹 노드의 리사이즈 핸들이 표시됨
- **기술적 구현**
  - 자식 노드는 `parentId` 속성만 사용 (`extent: 'parent'` 속성 사용 안 함)
  - 자식 노드와 부모 그룹 간 상대 좌표 변환을 하지 않고 절대 좌표 유지

---

## 5. 상태/강조 및 시각적 규칙

- **selected(포커싱) 클래스**
  - `.llm-node-container.selected` 등으로 테두리 강조
  - CSS 예시:
    ```css
    .llm-node-container {
      border: 2px solid #e0e7ef;
      border-radius: 16px;
      background: #fff;
    }
    .llm-node-container.selected {
      border: 2px solid #3b82f6;
      box-shadow: 0 0 0 2px #3b82f633;
    }
    ```
- **노드 크기, 여백, 폰트 등은 일관성 있게 유지**
- **모든 노드는 NodeErrorBoundary로 감싸 예외 발생 시에도 UI가 깨지지 않도록 함**

---

## 6. 기타

- **불필요한 분기(빈 div 반환 등)는 금지**
  - 항상 주요 정보와 UI가 노출되어야 함
- **상태 전환(포커싱, 모드 변경 등) 시 setState/setContent 등은 올바른 타입/필드만 사용**
- **모든 노드는 UX 일관성을 유지하며, 사용자에게 명확한 피드백(강조, 결과, placeholder 등)을 제공해야 함**

---

이 가이드라인은 실제 구현과 논의된 내용을 바탕으로 지속적으로 업데이트됩니다. 